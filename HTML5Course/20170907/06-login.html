<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <input type="text" name="username" placeholder="请输入用户名">
  <input type="password" name="password" placeholder="请输入密码">
  <input type="button" value="登录">
  <script src="myajax.js" charset="utf-8"></script>
  <script>
    var oUsername = document.querySelector('input[name=username]');
    var oPassword = document.querySelector('input[name=password]');
    var oBtn = document.querySelector('input[type=button]');
    oBtn.onclick = function() {
      //js校验
      //直接调用登录的接口
      myajax.post('http://h6.duchengjiu.top/shop/api_user.php',
      {
        status: 'login',
        username: oUsername.value,
        password: oPassword.value
      }, function(error, responseText){
        var json = JSON.parse(responseText);
        console.log(json);
        localStorage.token = json.data.token;
        localStorage.username = json.data.username;
        console.log(localStorage.token);
        console.log(localStorage.username);
      });
    }
  </script>
</body>
</html>
